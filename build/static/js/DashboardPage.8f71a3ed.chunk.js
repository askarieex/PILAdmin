(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[1],{386:function(t,e,a){"use strict";a.r(e);var n=a(8),o=a(26),s=a(2),c=a(4),l=a(14),r=a.n(l),i=a(0),d=a(340),f=a(347),b=a(70),j=a(344),u=a(388),p=a(200),x=a(44),h=a(51),g=a(390),O=a(127),y=a(339),m=a(354),v=a(392),S=a(348),k=a(394),C=a(395),T=a(357),z=a(396),A=a(397),w=a(360),I=a(118),D=a(68),M=a.n(D),N=a(5),U=d.a.Header,R=d.a.Content,J=d.a.Footer,L=f.a.Title;e.default=function(){var t=Object(i.useState)(!0),e=Object(c.a)(t,2),a=e[0],l=e[1],f=Object(i.useState)({totalUsers:0,totalContacts:0,totalDatesheets:0,totalMessages:0,totalApplications:0,totalSyllabus:0}),D=Object(c.a)(f,2),P=D[0],B=D[1],E=Object(i.useState)(Object(s.a)({},P)),W=Object(c.a)(E,2),F=W[0],H=W[1],Y=Object(i.useState)([]),$=Object(c.a)(Y,2),_=$[0],q=$[1],G=Object(i.useState)(!1),K=Object(c.a)(G,2),Q=K[0],V=K[1],X=Object(i.useState)(!1),Z=Object(c.a)(X,2),tt=Z[0],et=Z[1],at="http://api-pil.site/api/admin",nt=localStorage.getItem("x-auth-token");nt&&(nt=nt.replace(/^"|"$/g,"")),Object(i.useEffect)((function(){var t=localStorage.getItem("notifications");t&&q(JSON.parse(t)),ot()}),[nt]),Object(i.useEffect)((function(){localStorage.setItem("notifications",JSON.stringify(_))}),[_]);var ot=function(){var t=Object(o.a)(r.a.mark((function t(){var e,a,n,o,s,c,i,d,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(nt){t.next=3;break}return alert("Token not found. Please log in again."),t.abrupt("return");case 3:return t.prev=3,l(!0),i={headers:{Authorization:"Bearer ".concat(nt)}},t.next=8,Promise.all([M.a.get("".concat(at,"/total-users"),i),M.a.get("".concat(at,"/total-contacts"),i),M.a.get("".concat(at,"/total-datesheets"),i),M.a.get("".concat(at,"/total-messages"),i),M.a.get("".concat(at,"/total-applications"),i),M.a.get("".concat(at,"/total-syllabus"),i)]);case 8:d=t.sent,f={totalUsers:(null===(e=d[0])||void 0===e?void 0:e.data.count)||0,totalContacts:(null===(a=d[1])||void 0===a?void 0:a.data.count)||0,totalDatesheets:(null===(n=d[2])||void 0===n?void 0:n.data.count)||0,totalMessages:(null===(o=d[3])||void 0===o?void 0:o.data.count)||0,totalApplications:(null===(s=d[4])||void 0===s?void 0:s.data.count)||0,totalSyllabus:(null===(c=d[5])||void 0===c?void 0:c.data.count)||0},st(f),H(P),B(f),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),console.error("Error fetching stats:",t.t0),alert("Failed to fetch stats. Please try again later.");case 19:return t.prev=19,l(!1),et(!1),t.finish(19);case 23:case"end":return t.stop()}}),t,null,[[3,15,19,23]])})));return function(){return t.apply(this,arguments)}}(),st=function(t){var e=[];for(var a in t)t[a]>F[a]&&e.push({id:Date.now()+Math.random(),title:"Increase in ".concat(ct(a)),description:"The value of ".concat(ct(a)," has increased by ").concat(t[a]-F[a],"."),read:!1});e.length>0&&q((function(t){return[].concat(e,Object(n.a)(t))}))},ct=function(t){switch(t){case"totalUsers":return"Total Users";case"totalContacts":return"Total Contacts";case"totalDatesheets":return"Total Datesheets";case"totalMessages":return"Total Messages";case"totalApplications":return"Total Applications";case"totalSyllabus":return"Total Syllabus Uploaded";default:return t}},lt=function(){q((function(t){return t.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{read:!0})}))}))},rt=_.filter((function(t){return!t.read})).length,it=function(t,e,a,n){return Object(N.jsx)(b.a,{xs:24,sm:12,md:8,lg:6,children:Object(N.jsx)(j.a,{bordered:!1,style:{textAlign:"center",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s, box-shadow 0.3s",background:"#ffffff"},hoverable:!0,children:Object(N.jsx)(u.a,{title:t,value:e,prefix:a,valueStyle:{color:n,fontWeight:"bold"}})})},t)};return a?Object(N.jsx)("div",{style:{textAlign:"center",marginTop:"20%"},children:Object(N.jsx)(p.a,{size:"large",tip:"Loading Dashboard..."})}):Object(N.jsxs)(d.a,{style:{background:"#f0f2f5",minHeight:"100vh"},children:[Object(N.jsxs)(U,{style:{background:"#ffffff",padding:"0 30px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 8px #f0f1f2"},children:[Object(N.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(N.jsx)("img",{src:"https://pioneerinstitute.in/assets/images/nav-logo.png",alt:"Logo",style:{height:"50px",marginRight:"20px"}}),Object(N.jsx)(L,{level:3,style:{color:"#1890ff",margin:0},children:"Admin Dashboard"})]}),Object(N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[Object(N.jsx)(x.a,{type:"primary",icon:Object(N.jsx)(k.a,{}),onClick:function(){et(!0),ot()},loading:tt,children:"Refresh Data"}),Object(N.jsx)(h.a,{title:"Notifications",children:Object(N.jsx)(g.a,{count:rt,size:"small",offset:[-5,5],children:Object(N.jsx)(x.a,{shape:"circle",icon:Object(N.jsx)(C.a,{}),onClick:function(){V(!0),lt()},style:{backgroundColor:"#1890ff",border:"none",color:"#ffffff"}})})})]})]}),Object(N.jsxs)(R,{style:{padding:"30px 50px"},children:[Object(N.jsxs)(O.a,{gutter:[24,24],children:[it("Total Users",P.totalUsers,Object(N.jsx)(T.a,{style:{fontSize:"24px"}}),"#1890ff"),it("Total Contacts",P.totalContacts,Object(N.jsx)(z.a,{style:{fontSize:"24px"}}),"#52c41a"),it("Total Datesheets",P.totalDatesheets,Object(N.jsx)(A.a,{style:{fontSize:"24px"}}),"#fa8c16"),it("Total Messages",P.totalMessages,Object(N.jsx)(z.a,{style:{fontSize:"24px"}}),"#722ed1"),it("Total Applications",P.totalApplications,Object(N.jsx)(T.a,{style:{fontSize:"24px"}}),"#eb2f96"),it("Total Syllabus Uploaded",P.totalSyllabus,Object(N.jsx)(w.a,{style:{fontSize:"24px"}}),"#13c2c2")]}),Object(N.jsx)(y.a,{}),Object(N.jsxs)("div",{children:[Object(N.jsx)(L,{level:4,children:"Recent Notifications"}),0===_.length?Object(N.jsx)(m.a,{message:"No Notifications",description:"You are all caught up!",type:"success",showIcon:!0}):Object(N.jsx)(v.b,{itemLayout:"horizontal",dataSource:_.slice(0,5),renderItem:function(t){return Object(N.jsx)(v.b.Item,{style:{background:t.read?"#ffffff":"#e6f7ff",borderRadius:"8px",marginBottom:"10px",padding:"10px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:Object(N.jsx)(v.b.Item.Meta,{avatar:t.read?Object(N.jsx)(I.a,{style:{color:"#52c41a",fontSize:"20px"}}):Object(N.jsx)(C.a,{style:{color:"#1890ff",fontSize:"20px"}}),title:Object(N.jsx)("span",{style:{fontWeight:t.read?"normal":"bold"},children:t.title}),description:t.description})})}})]})]}),Object(N.jsxs)(J,{style:{textAlign:"center",background:"#f0f2f5"},children:["Admin Dashboard \xa92024 Powered by"," ",Object(N.jsx)("a",{href:"https://algodream.in",target:"_blank",rel:"noopener noreferrer",children:"AlgoDream"})]}),Object(N.jsx)(S.a,{title:"Notifications",visible:Q,footer:[Object(N.jsx)(x.a,{onClick:lt,disabled:0===rt,children:"Mark All as Read"},"markAll"),Object(N.jsx)(x.a,{type:"primary",onClick:function(){return V(!1)},children:"Close"},"close")],onCancel:function(){return V(!1)},children:0===_.length?Object(N.jsx)("p",{children:"No notifications to display."}):Object(N.jsx)(v.b,{itemLayout:"horizontal",dataSource:_,renderItem:function(t){return Object(N.jsx)(v.b.Item,{style:{background:t.read?"#f9f9f9":"#e6f7ff",borderRadius:"8px",marginBottom:"10px",padding:"10px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onClick:function(){return handleNotificationClick(t.id)},children:Object(N.jsx)(v.b.Item.Meta,{avatar:t.read?Object(N.jsx)(I.a,{style:{color:"#52c41a",fontSize:"20px"}}):Object(N.jsx)(C.a,{style:{color:"#1890ff",fontSize:"20px"}}),title:Object(N.jsx)("span",{style:{fontWeight:t.read?"normal":"bold"},children:t.title}),description:t.description})})}})})]})}}}]);
//# sourceMappingURL=DashboardPage.8f71a3ed.chunk.js.map