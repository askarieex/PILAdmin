{"version":3,"sources":["redux/auth/actions.js","pages/Logout.jsx"],"names":["login","loginAdminData","dispatch","a","type","actionTypes","payload","loading","authService","data","console","log","success","authValue","current","result","admin","isLoggedIn","storePersist","set","notification","message","description","name","history","push","msg","error","logout","Logout","useDispatch","useEffect","logoutAction","asyncLogout"],"mappings":"2PAMaA,EAAQ,SAACC,GAAD,8CAAoB,WAAOC,GAAP,iBAAAC,EAAA,6DACvCD,EAAS,CACPE,KAAMC,IACNC,QAAS,CAAEC,SAAS,KAHiB,kBAOlBC,IAAkBP,GAPA,OAO/BQ,EAP+B,OAQrCC,QAAQC,IAAIF,GACRA,EAAKG,SACDC,EAAY,CAChBC,QAASL,EAAKM,OAAOC,MACrBT,SAAS,EACTU,YAAY,GAIdC,IAAaC,IAAI,OAAQN,GAGzBX,EAAS,CACPE,KAAMC,IACNC,QAASG,EAAKM,OAAOC,QAIvBI,IAAaR,QAAQ,CACnBS,QAAS,mBACTC,YAAY,iBAAD,OAAmBb,EAAKM,OAAOC,MAAMO,MAAQ,QAA7C,OAIbC,IAAQC,KAAK,OAGbvB,EAAS,CACPE,KAAMC,IACNC,QAAS,CAAEoB,IAAKjB,EAAKiB,KAAO,4CAI9BN,IAAaO,MAAM,CACjBN,QAAS,eACTC,YAAab,EAAKiB,KAAO,4CA3CQ,gDAgDrCxB,EAAS,CACPE,KAAMC,IACNC,QAAS,CAAEoB,IAAK,2DAIlBN,IAAaO,MAAM,CACjBN,QAAS,cACTC,YAAa,0DAxDsB,yDAApB,uDA6DRM,EAAS,yDAAM,WAAO1B,GAAP,SAAAC,EAAA,+EAElBK,MAFkB,OAKxBN,EAAS,CACPE,KAAMC,MAIRe,IAAaR,QAAQ,CACnBS,QAAS,aACTC,YAAa,2CAIfE,IAAQC,KAAK,UAhBW,gDAmBxBL,IAAaO,MAAM,CACjBN,QAAS,eACTC,YAAa,iEArBS,yDAAN,wD,qGC3CPO,UAnBA,WACb,IAAM3B,EAAW4B,cAgBjB,OAPAC,qBAAU,WAAM,4CACd,sBAAA5B,EAAA,sEACQD,EAAS8B,eADjB,4CADc,uBAAC,WAAD,wBAIdC,KACC,IAEI","file":"static/js/LogoutPage.6b3e1b14.chunk.js","sourcesContent":["import * as actionTypes from \"./types\";\r\nimport * as authService from \"@/auth\";\r\nimport storePersist from \"@/redux/storePersist\";\r\nimport history from \"@/utils/history\";\r\nimport { notification } from \"antd\";\r\n\r\nexport const login = (loginAdminData) => async (dispatch) => {\r\n  dispatch({\r\n    type: actionTypes.LOADING_REQUEST,\r\n    payload: { loading: true },\r\n  });\r\n\r\n  try {\r\n    const data = await authService.login(loginAdminData);\r\n    console.log(data)\r\n    if (data.success) {\r\n      const authValue = {\r\n        current: data.result.admin,\r\n        loading: false,\r\n        isLoggedIn: true,\r\n      };\r\n\r\n      // Store auth value persistently\r\n      storePersist.set(\"auth\", authValue);\r\n\r\n      // Dispatch success action\r\n      dispatch({\r\n        type: actionTypes.LOGIN_SUCCESS,\r\n        payload: data.result.admin,\r\n      });\r\n\r\n      // Show success notification\r\n      notification.success({\r\n        message: \"Login Successful\",\r\n        description: `Welcome back, ${data.result.admin.name || \"Admin\"}!`,\r\n      });\r\n\r\n      // Redirect to dashboard\r\n      history.push(\"/\");\r\n    } else {\r\n      // Dispatch failure action\r\n      dispatch({\r\n        type: actionTypes.FAILED_REQUEST,\r\n        payload: { msg: data.msg || \"Invalid credentials. Please try again.\" },\r\n      });\r\n\r\n      // Show error notification\r\n      notification.error({\r\n        message: \"Login Failed\",\r\n        description: data.msg || \"Invalid credentials. Please try again.\",\r\n      });\r\n    }\r\n  } catch (error) {\r\n    // Dispatch failure action for unexpected errors\r\n    dispatch({\r\n      type: actionTypes.FAILED_REQUEST,\r\n      payload: { msg: \"An unexpected error occurred. Please try again later.\" },\r\n    });\r\n\r\n    // Show error notification\r\n    notification.error({\r\n      message: \"Login Error\",\r\n      description: \"An unexpected error occurred. Please try again later.\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  try {\r\n    await authService.logout();\r\n\r\n    // Dispatch logout success\r\n    dispatch({\r\n      type: actionTypes.LOGOUT_SUCCESS,\r\n    });\r\n\r\n    // Show success notification\r\n    notification.success({\r\n      message: \"Logged Out\",\r\n      description: \"You have been successfully logged out.\",\r\n    });\r\n\r\n    // Redirect to login\r\n    history.push(\"/login\");\r\n  } catch (error) {\r\n    // Show error notification on logout failure\r\n    notification.error({\r\n      message: \"Logout Error\",\r\n      description: \"An error occurred while logging out. Please try again later.\",\r\n    });\r\n  }\r\n};\r\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { Button, Result } from \"antd\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logout as logoutAction } from \"@/redux/auth/actions\";\r\n\r\nconst Logout = () => {\r\n  const dispatch = useDispatch();\r\n  // const callbackLogout = useCallback(async () => {\r\n  //   await dispatch(logoutAction());\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   callbackLogout();\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    async function asyncLogout() {\r\n      await dispatch(logoutAction());\r\n    }\r\n    asyncLogout();\r\n  }, []);\r\n\r\n  return <></>;\r\n};\r\nexport default Logout;\r\n"],"sourceRoot":""}